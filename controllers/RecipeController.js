const {matchedData} = require("express-validator");
const {RecipeModel} = require("../models/RecipeModel.js")

const getRecipes = async (req, res) => {
    try {
        const data = await RecipeModel.findAll();
        res.send(data);
    } catch (e) {
        console.log(e);
    }
}
const getRecipe = async (req, res) => {
    const {id} = req.params;
    try {
        const data = await RecipeModel.findOne({
            where: {
                id,
            }
        });
        res.send(data);
    } catch (e) {
        res.status(500).json({
            message: e.message,
        });
    }

}
const postRecipe = async (req, res) => {
    try {

        console.log(req.body)
        const data = await RecipeModel.create(req.body);
        res.send({data})
    } catch (e) {
        console.log(e)
    }
}
const putRecipes = async (req, res) => {
    const {id} = req.params;
    try {
        const {nombre, caloria, grasa, carbohidrato, proteina, hierro} = req.body;
        const data = await RecipeModel.findByPk(id);
        data.nombre = nombre;
        data.caloria = caloria;
        data.grasa = grasa;
        data.carbohidrato = carbohidrato;
        data.proteina = proteina;
        data.hierro = hierro;
        await data.save();
        res.send(data);
    } catch (e) {
        res.status(500).json({
            message: e.message,
        });
    }

}
const deleteRecipes = async (req, res) => {
    const {id} = req.params;
    try {
        const data = await RecipeModel.destroy({
            where: {
                id: id
            }
        });
        res.send({
            status: 200,
            message: "successfully deleted"
        });
    } catch (e) {
        res.status(500).json({
            message: e.message,
        });
    }
}

module.exports = {getRecipes, postRecipe, getRecipe, putRecipes, deleteRecipes};
























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































